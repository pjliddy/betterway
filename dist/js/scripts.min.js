"use strict";function renderTemplate(t,a){var e=Handlebars.compile(t),n=e({data:a});return n}function replaceTemplate(t,a,e){var n=Handlebars.compile(a),l=n({data:e});$(t).html(l)}function appendTemplate(t,a,e){var n=Handlebars.compile(a),l=n({data:e});$(t).append(l)}function removeTemplate(t){$(t).remove()}function showModal(t){$(".modal").length?replaceTemplate($(".modal")[0],t):$("body").append(t),$(".modal").modal("show")}function getListingData(t){return $.ajax({url:t,cache:!0})}function getTemplate(t){return $.ajax({url:t,cache:!0})}function submitContact(t){return $.ajax({url:"./cgi/submit.php",type:"POST",data:t,cache:!1})}function getDetailData(t){for(var a=0;a<listingsObj.data.length;a++)if(listingsObj.data[a].mls==t)return listingsObj.data[a]}function showDetails(t){getTemplate("js/templates/modal-detail.hbs").then(function(a){var e=getDetailData(t),n=renderTemplate(a,e);showModal(n)}).fail(function(t){return console.log("listing template is not available",t)})}function setUpGallery(){Galleria.loadTheme("https://cdnjs.cloudflare.com/ajax/libs/galleria/1.5.7/themes/classic/galleria.classic.min.js"),Galleria.run(".galleria")}function showContactForm(){getTemplate("js/templates/modal-contact.hbs").then(function(t){var a=renderTemplate(t);showModal(a),$("#phone").mask("(999) 999-9999",{placeholder:" "})}).fail(function(t){return console.log("contact template is not available")})}function showSubmitError(){getTemplate("js/templates/modal-submit-error.hbs").then(function(t){var a=renderTemplate(t);showModal(a)}).fail(function(t){return console.log("submit errror template is not available")})}function showSubmitSuccess(){getTemplate("js/templates/modal-submit-success.hbs").then(function(t){var a=renderTemplate(t);showModal(a)}).fail(function(t){return console.log("submit success template is not available")})}function handleEvents(){$("a.page-scroll").bind("click",function(t){var a=$(this);$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top-92},800,"easeInOutExpo"),t.preventDefault()}),$("body").scrollspy({target:".navbar-fixed-top",offset:92}),$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()}),$("#mainNav").affix({offset:{top:92}}),$(".listings").on("click",".see-more",function(t){showDetails($(t.target).data("mls"))}),$(".contact-btn").click(function(){showContactForm()}),$("body").on("submit","form#contact-form",function(t){t.preventDefault();var a=$("input#firstName").val()+" "+$("input#lastName").val(),e=$("input#email").val(),n=$("input#phone").val(),l={name:a,email:e,phone:n};submitContact(l).then(showSubmitSuccess).fail(showSubmitError),$("form#contact-form input").val("")}),$("body").on("shown.bs.modal","#detail-modal",function(){setUpGallery()}),$("body").on("hidden.bs.modal",".modal",function(){removeTemplate(".modal")})}var dev="1oDO9zkpaK1wUSynqYgpQzIs3BJVZN9H19DtwQXBjNfw",staging="1nz4bJDJdKXyGvMbzfAYol6TpwfsVyoeKWKLFFjYa1Hw",prod="1oG10rZemC5R6-EcE8bLUofAMoJaqnsS-lgKxGUCuW2c",listingsObj=void 0;$(function(){handleEvents(),listingsObj=new ListingData(prod,dev,staging),getListingData(listingsObj.url).then(function(t){listingsObj.setData(t.feed.entry),getTemplate("js/templates/listings.hbs").then(function(t){replaceTemplate("#listings",t,listingsObj.data)}).fail(function(t){return console.log("listing template is not available")})}).fail(function(t){return console.log("data feed is not available")})});